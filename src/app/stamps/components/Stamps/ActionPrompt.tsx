import { motion, MotionProps } from 'framer-motion';
import { useMemo } from 'react';

const defaultPathProps: Partial<MotionProps> = {
  variants: {
    initial: { pathLength: 0, opacity: 0 },
    animate: { pathLength: 1, opacity: 1 },
  },
  transition: { duration: 0.25, opacity: { duration: 0 }, ease: 'easeIn' },
};

const defaultGroupProps: Partial<MotionProps> = {
  variants: {
    initial: { pathLength: 0, opacity: 0 },
    animate: (custom: number = 1) => ({
      pathLength: 1,
      opacity: 1,
      transition: {
        staggerChildren: 0.15 * custom,
      },
    }),
  },
  initial: 'initial',
};

export function ActionPrompt({
  className,
  animate,
  shouldAnimate,
  pathProps: overridePathProps,
  groupProps: overrideGroupProps,
}: {
  className?: string;
  animate?: boolean;
  shouldAnimate?: boolean;
  pathProps?: MotionProps;
  groupProps?: MotionProps;
}) {
  const groupProps = useMemo(
    () => ({
      ...defaultGroupProps,
      animate: shouldAnimate ? (animate ? 'animate' : 'initial') : 'animate',
      custom: shouldAnimate ? 1 : 0,
      ...overrideGroupProps,
    }),
    [animate, overrideGroupProps, shouldAnimate],
  );

  const pathProps = useMemo(
    () => ({
      ...defaultPathProps,
      transition: {
        duration: shouldAnimate ? (animate ? 0.25 : 0) : 0,
      },
      ...overridePathProps,
    }),
    [overridePathProps, animate, shouldAnimate],
  );

  return (
    <svg className={className} viewBox="0 0 299 61" fill="none" xmlns="http://www.w3.org/2000/svg">
      <motion.g
        strokeWidth="2"
        stroke="currentColor"
        strokeMiterlimit="10"
        strokeLinecap="round"
        strokeLinejoin="round"
        {...groupProps}
      >
        <motion.path
          d="M283.594 50.9818C284.971 53.0713 288.118 57.6878 289.688 59.4378C291.651 61.6253 293.239 53.1008 297.815 51.3211"
          {...pathProps}
        />
        <motion.path
          d="M211.695 19.7403C238.129 27.7288 297.488 -13.1414 290.875 59.33"
          {...pathProps}
        />
        <motion.path
          d="M148.832 20.3693C149.029 18.9502 151.301 17.0169 152.116 15.7587C153.114 14.2159 152.944 14.2626 153.43 12.6366C155.473 5.80428 146.505 17.8624 151.528 23.1659C152.729 24.4353 154.29 25.363 156.133 24.907C158.591 24.2979 161.024 20.5095 161.691 18.1886C161.811 17.7697 161.871 16.8921 161.871 16.8921C161.871 16.8921 162.188 19.995 163.305 20.8356C164.761 21.9314 167.337 22.3547 168.426 20.4447C171.72 14.6696 163.449 12.1128 164.205 14.3523"
          {...pathProps}
        />
        <motion.path
          d="M174.921 16.5003C175.071 15.4221 168.556 23.8578 176.368 23.5297C180.318 23.3639 182.463 17.983 179.945 15.2152C178.022 13.1013 175.988 15.1427 178.313 15.8695C182.488 17.1756 196.526 8.79888 192.803 5.10507C191.271 3.58581 189.573 7.48214 189.267 8.35874C188.437 10.7401 185.577 23.9407 186.868 25.6479C187.507 26.4931 188.624 15.2798 189.664 15.0221C191.438 14.5833 194.525 16.8657 193.536 18.8633C193.051 19.8445 188.059 20.573 188.95 21.7519C190.228 23.4415 193.826 22.85 195.47 23.9784"
          {...pathProps}
        />
        <motion.path
          d="M3.63706 23.7844C5.21866 22.0024 5.78886 19.3843 6.10899 17.0787C6.22928 16.2145 6.5887 13.6213 6.46914 14.4858C5.61232 20.6588 6.39457 43.7188 14.328 27.6915"
          {...pathProps}
        />
        <motion.path
          d="M16.5481 19.6292C20.0535 14.5218 25.306 22.0266 24.0105 26.1716C23.7884 26.8813 21.3535 23.6538 20.4505 23.2547C18.2576 22.2853 14.7728 23.1802 14.784 25.9922C14.8021 30.5535 23.9657 26.1581 25.4573 25.271"
          {...pathProps}
        />
        <motion.path
          d="M26.8308 13.7873C25.0497 17.3855 27.1727 25.47 28.4349 29.2089C28.4873 29.3627 28.4304 29.6486 28.5909 29.6708C30.0339 29.8713 28.7743 26.7614 28.9747 25.3184C29.1533 24.0353 30.9498 18.1536 33.2723 19.7471C35.7174 21.4257 27.2553 26.601 27.1919 27.0535C27.1701 27.2151 27.4925 26.9152 27.6546 26.8979C29.3462 26.7155 31.5894 27.444 33.273 27.6772C34.4121 27.8356 35.2713 27.7259 36.3887 27.4487"
          {...pathProps}
        />
        <motion.path
          d="M37.5171 24.0812C44.2096 25.0098 44.133 16.231 40.8242 17.7118C34.7966 20.4085 36.8741 31.1989 45.9876 28.1202"
          {...pathProps}
        />
        <motion.path
          d="M2.84336 18.3882C-1.51664 18.3293 8.54609 18.8927 10.0652 18.7292"
          {...pathProps}
        />
        <motion.path
          d="M60.1127 18.406C59.6188 18.645 62.6804 16.8089 64.6508 19.036C65.7908 20.3247 68.1556 26.8297 66.2301 28.2859C66.2025 28.307 62.2503 20.2906 59.5187 24.2713C57.4046 27.3511 65.616 26.2039 66.0982 26.0655"
          {...pathProps}
        />
        <motion.path
          d="M86.0513 21.5124C86.6238 18.8072 82.4012 18.8058 82.3654 22.0705C82.2947 28.4326 90.9374 26.0273 93.3089 23.0478"
          {...pathProps}
        />
        <motion.path
          d="M92.9073 20.7321C94.6684 20.2728 100.016 14.9572 97.3977 13.2081C94.5591 11.3112 91.6449 22.431 93.9248 25.4082C96.9711 29.384 101.976 23.192 102.583 20.3263C102.62 20.1481 102.987 19.3583 102.336 19.3821C99.8483 19.473 102.206 28.1759 106.86 24.3531C111.829 20.2725 104.921 15.3502 101.651 19.4597"
          {...pathProps}
        />
        <motion.path
          d="M116.038 19.4987C115.751 17.1677 110.962 17.0531 111.417 19.2333C111.735 20.7552 116.423 25.1807 114.785 26.8133C113.806 27.7884 111.243 25.7677 110.68 25.0945C107.909 21.7848 124.776 21.9555 126.182 17.7622C127.764 13.0429 118.944 22.2458 123.347 24.0897C125.536 25.0059 127 19.8771 129.174 19.4789C130.987 19.1462 131.228 22.435 131.434 23.7188C131.54 24.3689 131.13 26.3324 131.26 25.6866C132.146 21.2969 129.443 16.862 135.681 18.1207"
          {...pathProps}
        />
      </motion.g>
    </svg>
  );
}
